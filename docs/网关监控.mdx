---
id: 102
title: 网关监控
---


import useBaseUrl from "@docusaurus/useBaseUrl";
import Tag from "@site/src/components/Tag.js";
import Highlight from '@site/src/components/Highlight.js';


## 一、说明

- 配置

该页面 可执行 添加/修改/删除/导出/导入 等操作

- 状态

查看每个设备的运行情况、连接状态、交互日志以及其他相关监控信息。

## 二、配置

<img src={require("@site/static/img/docs/网关监控1.png").default} />

点击显示类型切换 `变量页面` 和 `日志页面`

右键键点击树节点，弹出操作菜单


### 2.1、通道

建立通道需绑定唯一的插件

<img src={require("@site/static/img/docs/添加通道.png").default} />

<img src={require("@site/static/img/docs/通道配置3.png").default} />

#### 通道配置项
|  属性| 说明 |
| --- | --- |
| 名称 | 通道名称|
| 插件名称 | 选择对应交互插件|
| 启用 | 是否启用通道 |
| 启用调试日志 | 是否启用调试日志 |
| 日志等级 | 调试日志等级 |
| 通道类型 | 选择 TcpClient/TcpService/SerialPortClient/UdpSession/Other |
| 远程地址 | 对于TcpClient/UdpSession 作为客户端有效， 填入服务端的Url信息，比如192.168.0.1:502  |
| 本地地址 | 对于TcpClient/TcpService/UdpSession 有效，作为本机的绑定地址，可选择填入，为空时是随机绑定端口 |
| COM口 | 对于SerialPortClient有效，串口名称 |
| 波特率 | 对于SerialPortClient有效，串口波特率 |
| 数据位 | 对于SerialPortClient有效，串口数据位 |
| 校验位 | 对于SerialPortClient有效，串口校验位 |
| 停止位 | 对于SerialPortClient有效，串口停止位 |
| 启用Dtr | 对于SerialPortClient有效，串口DtrEnable |
| 启用Rts | 对于SerialPortClient有效，串口RtsEnable |
| 接收缓存超时 | 流式数据拼包的最大间隔时间 |
| 连接超时 | Tcp连接超时 |
| 最大并发数 | 并发数量，大部分插件都支持1，默认值为1 |

#### 其他通道操作功能

除了基本的 添加/修改/删除 操作外，网关监控页面还包含以下通道配置操作：

- 批量编辑通道

- 导出/导入



### 2.2、设备

<img src={require("@site/static/img/docs/设备配置1.png").default} />

<img src={require("@site/static/img/docs/设备配置2.png").default} />

#### 设备配置项

|  属性| 说明 |
| --- | --- |
|名称| 设备名称| 
|描述| 当前设备描述 |
|设备使能| 启动/停用采集设备 |
| 启用调试日志 | 是否启用调试日志 |
| 日志等级 | 调试日志等级 |
|通道| 选择对应的通道 |
|默认执行间隔| 执行间隔，对于采集设备，这个属性是默认的采集间隔，对于业务设备，这个属性是循环线程的等待间隔时间 |
|启用冗余| 启动/停用设备冗余 |
|冗余设备| 备用设备选择|
|冗余操作模式| Offline/Script ，默认为Offline：设备离线后切换冗余，Script模式为检测脚本返回值|
|冗余检测脚本| 返回true时，切换设备，脚本传入参数raw为 DeviceRuntime类型 |
|备用字段| 存储自定义信息 |

#### 其他设备操作功能

除了基本的 添加/修改/删除 操作外，网关监控页面还包含以下设备配置操作：

- 批量编辑设备

- 导出/导入

### 2.3、变量


#### 变量基础属性配置项

<img src={require("@site/static/img/docs/变量配置1.png").default} />

|属性名称| 属性描述| 备注|
|-----------|--------------|-----------------|
|名称| 当前变量名称，全局唯一(变量)| |
|描述| 当前变量描述 ||
|单位| 变量值单位 ||
|读写权限| 读写/只写/只读 ||
|变量使能| 启用/停用变量 ||
|远程写入| 对于变量的写入使能配置 ||
|初始值| 初始值 ||
|保存初始值| 当运行系统退出时会将退出时刻的值保存到变量定义的初始值中，作为下次运行时的初始值 ||
|采集设备| 当前采集设备选择的设备，通过级联选择器选择对应设备名称设置 ||
|数据类型| 对应的数据类型 |注意除了特殊驱动，一般不应该选择object|
|执行间隔| 读取时间间隔/执行特殊方法读取的间隔 ||
|特殊方法| 某些插件特有的方法 |对于不同的插件,特殊方法配置不相同,查看对应的插件说明|
|变量地址| PLC寄存器等 |对于不同插件的设备,变量地址配置不相同,查看对应的插件说明，点击右侧按钮也可以弹出可视化编辑框(如果插件支持)，鼠标悬停也会提示寄存器格式说明 |
|数组长度| 数组长度，默认1 |
|读取表达式| 动态解析的表达式 ,原始值的代码为raw|示例：``raw.ToInt()*10+3`` 结果：原始值raw为8,输出实时值83 。|
|写入表达式| 动态解析的表达式，在写入值时转化,原始值的代码为raw|示例：``raw.ToInt()/10`` 结果：写入值为230时，会下发23到PLC 。|
|备用字段| 存储自定义信息 |

#### 报警属性配置项

<img src={require("@site/static/img/docs/变量配置2.png").default} />

:::tip `说明`

报警属性中定义变量产生报警的规则所需的配置

:::

|属性名称| 属性描述| 备注|
|-----------|--------------|-----------------|
|报警使能| 启用对应报警功能| |
|报警限值| 超限时产生报警，布尔量为固定 ||
|报警文本| 对应显示的报警文本 ||
|报警约束| 动态解析的表达式 ,原始值的代码为raw，计算值为true时才能产生报警，默认为空||

:::tip `例子`

数值高高报警

变量值大于报警限值，并且报警约束为true或者报警约束不存在时，产生报警

比如设置高高限值为1，其他默认，当变量值大于1时，产生报警

:::


#### 业务属性配置项
<img src={require("@site/static/img/docs/变量配置3.png").default} />

选择业务设备，点击添加/刷新按钮，下方会显示出该业务设备对应的配置项

:::tip `说明`

上传属性中定义变量关联的上传设备所需的配置

对于不同的插件，插件属性项也不相同，查看对应插件章节中的详细说明。

:::


#### 其他变量操作功能

除了基本的 添加/修改/删除 操作外，网关监控页面还包含以下变量配置操作：

- 批量编辑变量

- 导出/导入

- 清空

- 一键添加测试变量



## 三、状态

<img src={require("@site/static/img/docs/网关监控1.png").default} />

点击显示类型切换 `变量页面` 和 `日志页面`

左键点击树节点，切换显示内容

当显示类型为 `变量页面` 时，左键点击树节点，可显示该节点下的全部变量

当显示类型为 `日志页面` 时，左键点击树节点，可显示通道/设备日志

### 3.1 通道日志

<img src={require("@site/static/img/docs/网关监控2.png").default} />

### 3.2 设备日志

<img src={require("@site/static/img/docs/网关监控3.png").default} />

### 3.3 变量页面

<img src={require("@site/static/img/docs/网关监控4.png").default} />


